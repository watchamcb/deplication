<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Forcing XStream to use reflection for serialization | Deplication</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Forcing XStream to use reflection for serialization" />
<meta name="author" content="Craig Watcham" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="XStream is a fantastic library for serialising objects to XML, this (very short) post explains how to force reflection on classes implementing the Externalizable interface. The code below is the typical usage of XStream to serialise an object XStream xstream = new XStream(); System.out.println(xstream.toXML(someObject); Unfortunately if someObject implements Externalizable then the output XML looks something like: &lt;com.blogspot.deplication.SomeObject&gt; &nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt; &nbsp; &nbsp; &lt;int&gt;1234213&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;20163&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;0&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;4211&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;32321981&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;1233&lt;/int&gt; &nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt; &lt;/com.blogspot.deplication.SomeObject&gt; To fix this, the priority of the ReflectionConverter needs to be increased as by default it is the last converter called when trying to serialise the object. XStream xstream = new XStream(); ReflectionConverter reflectionConverter = new ReflectionConverter( &nbsp; &nbsp; new CachingMapper(xstream.getMapper()), xstream.getReflectionProvider()); xstream.registerConverter(reflectionConverter, XStream.PRIORITY_LOW); System.out.println(xstream.toXML(someObject); This code results in the more friendly XML output: &lt;com.blogspot.deplication.SomeObject&gt; &nbsp; &nbsp; &lt;__id&gt;1234213&lt;/__id&gt; &nbsp; &nbsp; &lt;__tradeId&gt;20163&lt;/__tradeId&gt; &nbsp; &nbsp; &lt;__linkedTradeId&gt;0&lt;/__linkedTradeId&gt; &nbsp; &nbsp; &lt;__bookId&gt;4211&lt;/__bookId&gt; &nbsp; &nbsp; &lt;__productId&gt;32321981&lt;/__productId&gt; &nbsp; &nbsp; &lt;__eventConfigId&gt;1233&lt;/__eventConfigId&gt; &lt;/com.blogspot.deplication.SomeObject&gt;" />
<meta property="og:description" content="XStream is a fantastic library for serialising objects to XML, this (very short) post explains how to force reflection on classes implementing the Externalizable interface. The code below is the typical usage of XStream to serialise an object XStream xstream = new XStream(); System.out.println(xstream.toXML(someObject); Unfortunately if someObject implements Externalizable then the output XML looks something like: &lt;com.blogspot.deplication.SomeObject&gt; &nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt; &nbsp; &nbsp; &lt;int&gt;1234213&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;20163&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;0&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;4211&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;32321981&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;1233&lt;/int&gt; &nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt; &lt;/com.blogspot.deplication.SomeObject&gt; To fix this, the priority of the ReflectionConverter needs to be increased as by default it is the last converter called when trying to serialise the object. XStream xstream = new XStream(); ReflectionConverter reflectionConverter = new ReflectionConverter( &nbsp; &nbsp; new CachingMapper(xstream.getMapper()), xstream.getReflectionProvider()); xstream.registerConverter(reflectionConverter, XStream.PRIORITY_LOW); System.out.println(xstream.toXML(someObject); This code results in the more friendly XML output: &lt;com.blogspot.deplication.SomeObject&gt; &nbsp; &nbsp; &lt;__id&gt;1234213&lt;/__id&gt; &nbsp; &nbsp; &lt;__tradeId&gt;20163&lt;/__tradeId&gt; &nbsp; &nbsp; &lt;__linkedTradeId&gt;0&lt;/__linkedTradeId&gt; &nbsp; &nbsp; &lt;__bookId&gt;4211&lt;/__bookId&gt; &nbsp; &nbsp; &lt;__productId&gt;32321981&lt;/__productId&gt; &nbsp; &nbsp; &lt;__eventConfigId&gt;1233&lt;/__eventConfigId&gt; &lt;/com.blogspot.deplication.SomeObject&gt;" />
<link rel="canonical" href="http://localhost:4000/2011/07/20/forcing-xstream-to-use-reflection-for.html" />
<meta property="og:url" content="http://localhost:4000/2011/07/20/forcing-xstream-to-use-reflection-for.html" />
<meta property="og:site_name" content="Deplication" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-07-20T10:48:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Forcing XStream to use reflection for serialization" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Craig Watcham"},"dateModified":"2011-07-20T10:48:00+01:00","datePublished":"2011-07-20T10:48:00+01:00","description":"XStream is a fantastic library for serialising objects to XML, this (very short) post explains how to force reflection on classes implementing the Externalizable interface. The code below is the typical usage of XStream to serialise an object XStream xstream = new XStream(); System.out.println(xstream.toXML(someObject); Unfortunately if someObject implements Externalizable then the output XML looks something like: &lt;com.blogspot.deplication.SomeObject&gt; &nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt; &nbsp; &nbsp; &lt;int&gt;1234213&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;20163&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;0&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;4211&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;32321981&lt;/int&gt; &nbsp; &nbsp; &lt;int&gt;1233&lt;/int&gt; &nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt; &lt;/com.blogspot.deplication.SomeObject&gt; To fix this, the priority of the ReflectionConverter needs to be increased as by default it is the last converter called when trying to serialise the object. XStream xstream = new XStream(); ReflectionConverter reflectionConverter = new ReflectionConverter( &nbsp; &nbsp; new CachingMapper(xstream.getMapper()), xstream.getReflectionProvider()); xstream.registerConverter(reflectionConverter, XStream.PRIORITY_LOW); System.out.println(xstream.toXML(someObject); This code results in the more friendly XML output: &lt;com.blogspot.deplication.SomeObject&gt; &nbsp; &nbsp; &lt;__id&gt;1234213&lt;/__id&gt; &nbsp; &nbsp; &lt;__tradeId&gt;20163&lt;/__tradeId&gt; &nbsp; &nbsp; &lt;__linkedTradeId&gt;0&lt;/__linkedTradeId&gt; &nbsp; &nbsp; &lt;__bookId&gt;4211&lt;/__bookId&gt; &nbsp; &nbsp; &lt;__productId&gt;32321981&lt;/__productId&gt; &nbsp; &nbsp; &lt;__eventConfigId&gt;1233&lt;/__eventConfigId&gt; &lt;/com.blogspot.deplication.SomeObject&gt;","headline":"Forcing XStream to use reflection for serialization","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2011/07/20/forcing-xstream-to-use-reflection-for.html"},"url":"http://localhost:4000/2011/07/20/forcing-xstream-to-use-reflection-for.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Deplication" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Deplication</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Forcing XStream to use reflection for serialization</h1>
    <p class="post-meta"><time class="dt-published" datetime="2011-07-20T10:48:00+01:00" itemprop="datePublished">
        Jul 20, 2011
      </time>â€¢ 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Craig Watcham</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <a href="http://xstream.codehaus.org/">XStream</a> is a fantastic library for serialising objects to XML, this (very short) post explains how to force reflection on classes implementing the Externalizable interface. The code below is the typical usage of XStream to serialise an object<br />
<br />
<blockquote>XStream xstream = new XStream();<br />
System.out.println(xstream.toXML(someObject);</blockquote><br />
Unfortunately if someObject implements Externalizable then the output XML looks something like:<br />
<blockquote>&lt;com.blogspot.deplication.SomeObject&gt;<br />
&nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt;<br />
&nbsp; &nbsp; &lt;int&gt;1234213&lt;/int&gt;<br />
&nbsp; &nbsp; &lt;int&gt;20163&lt;/int&gt;<br />
&nbsp; &nbsp; &lt;int&gt;0&lt;/int&gt;<br />
&nbsp; &nbsp; &lt;int&gt;4211&lt;/int&gt;<br />
&nbsp; &nbsp; &lt;int&gt;32321981&lt;/int&gt;<br />
&nbsp; &nbsp; &lt;int&gt;1233&lt;/int&gt;<br />
&nbsp; &nbsp; &lt;boolean&gt;true&lt;/boolean&gt;<br />
&lt;/com.blogspot.deplication.SomeObject&gt;</blockquote><br />
To fix this, the priority of the ReflectionConverter needs to be increased as by default it is the last converter called when trying to serialise the object.<br />
<blockquote>XStream xstream = new XStream();<br />
ReflectionConverter reflectionConverter = new ReflectionConverter(<br />
&nbsp; &nbsp; new CachingMapper(xstream.getMapper()), xstream.getReflectionProvider());<br />
xstream.registerConverter(reflectionConverter, XStream.PRIORITY_LOW);<br />
System.out.println(xstream.toXML(someObject);</blockquote><br />
This code results in the more friendly XML output:<br />
<br />
<blockquote>&lt;com.blogspot.deplication.SomeObject&gt;<br />
&nbsp; &nbsp; &lt;__id&gt;1234213&lt;/__id&gt;<br />
&nbsp; &nbsp; &lt;__tradeId&gt;20163&lt;/__tradeId&gt;<br />
&nbsp; &nbsp; &lt;__linkedTradeId&gt;0&lt;/__linkedTradeId&gt;<br />
&nbsp; &nbsp; &lt;__bookId&gt;4211&lt;/__bookId&gt;<br />
&nbsp; &nbsp; &lt;__productId&gt;32321981&lt;/__productId&gt;<br />
&nbsp; &nbsp; &lt;__eventConfigId&gt;1233&lt;/__eventConfigId&gt;<br />
&lt;/com.blogspot.deplication.SomeObject&gt;</blockquote>
  </div><a class="u-url" href="/2011/07/20/forcing-xstream-to-use-reflection-for.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="http://localhost:4000/feed.xml">
            <svg class="svg-icon orange">
              <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
                11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
                13.806c0-1.21.983-2.195 2.194-2.195zM10.606
                16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
              />
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">GitHub User</li>
          <li><a class="u-email" href="mailto:your-email@domain.com">your-email@domain.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Simpler is better.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
