<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Bash script to automate report checking | Deplication</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Bash script to automate report checking" />
<meta name="author" content="Craig Watcham" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The script below is a convenient hack to automate manual report checking. It requires uuencode and mailx (or equivalents) to be installed and uses the regular expression provided on the command line to check if the occurrences are greater than the specified number. This allows for a number of convenient checks: Using &quot;$&quot; as the regex and a count of 1 prevents empty reports from being sent. The count can be changed to 2 if the report has a header line even when it has no results. A specific condition can be matched, for example using a regex of &quot;Match this text&quot; to email the report only if the text appears in the report. As always, there are multiple ways of solving the problem. This was a quick an convenient script to allow multiple reports to be checked and mailed to different recipients under different conditions. #!/bin/bash # Shell script for checking a named (text) report for a number of occurrences of a # search if the search string is found at least the number of times specified then # the report is mailed to the specified email list # # Usage example: # This command will check the report.csv report for any entries ($REPORT_DIR needs # to be set): # ./check_report.sh report.csv &quot;$&quot; 1 my.email@address &quot;Email Subject&quot; cd $REPORT_DIR if [ -e $1 ]; then &nbsp; &nbsp; COUNT=`grep -c &quot;$2&quot; &quot;$1&quot;` &nbsp; &nbsp; if [ $COUNT -gt $3 ]; then &nbsp; &nbsp; &nbsp; &nbsp; uuencode &quot;$1&quot; &quot;$1&quot; | mailx -s &quot;Check Report $5&quot; &quot;$4&quot; &gt; /dev/null &nbsp; &nbsp; fi fi" />
<meta property="og:description" content="The script below is a convenient hack to automate manual report checking. It requires uuencode and mailx (or equivalents) to be installed and uses the regular expression provided on the command line to check if the occurrences are greater than the specified number. This allows for a number of convenient checks: Using &quot;$&quot; as the regex and a count of 1 prevents empty reports from being sent. The count can be changed to 2 if the report has a header line even when it has no results. A specific condition can be matched, for example using a regex of &quot;Match this text&quot; to email the report only if the text appears in the report. As always, there are multiple ways of solving the problem. This was a quick an convenient script to allow multiple reports to be checked and mailed to different recipients under different conditions. #!/bin/bash # Shell script for checking a named (text) report for a number of occurrences of a # search if the search string is found at least the number of times specified then # the report is mailed to the specified email list # # Usage example: # This command will check the report.csv report for any entries ($REPORT_DIR needs # to be set): # ./check_report.sh report.csv &quot;$&quot; 1 my.email@address &quot;Email Subject&quot; cd $REPORT_DIR if [ -e $1 ]; then &nbsp; &nbsp; COUNT=`grep -c &quot;$2&quot; &quot;$1&quot;` &nbsp; &nbsp; if [ $COUNT -gt $3 ]; then &nbsp; &nbsp; &nbsp; &nbsp; uuencode &quot;$1&quot; &quot;$1&quot; | mailx -s &quot;Check Report $5&quot; &quot;$4&quot; &gt; /dev/null &nbsp; &nbsp; fi fi" />
<link rel="canonical" href="http://localhost:4000/2011/07/16/bash-script-to-automate-report-checking.html" />
<meta property="og:url" content="http://localhost:4000/2011/07/16/bash-script-to-automate-report-checking.html" />
<meta property="og:site_name" content="Deplication" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-07-16T11:20:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bash script to automate report checking" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Craig Watcham"},"dateModified":"2011-07-16T11:20:00+01:00","datePublished":"2011-07-16T11:20:00+01:00","description":"The script below is a convenient hack to automate manual report checking. It requires uuencode and mailx (or equivalents) to be installed and uses the regular expression provided on the command line to check if the occurrences are greater than the specified number. This allows for a number of convenient checks: Using &quot;$&quot; as the regex and a count of 1 prevents empty reports from being sent. The count can be changed to 2 if the report has a header line even when it has no results. A specific condition can be matched, for example using a regex of &quot;Match this text&quot; to email the report only if the text appears in the report. As always, there are multiple ways of solving the problem. This was a quick an convenient script to allow multiple reports to be checked and mailed to different recipients under different conditions. #!/bin/bash # Shell script for checking a named (text) report for a number of occurrences of a # search if the search string is found at least the number of times specified then # the report is mailed to the specified email list # # Usage example: # This command will check the report.csv report for any entries ($REPORT_DIR needs # to be set): # ./check_report.sh report.csv &quot;$&quot; 1 my.email@address &quot;Email Subject&quot; cd $REPORT_DIR if [ -e $1 ]; then &nbsp; &nbsp; COUNT=`grep -c &quot;$2&quot; &quot;$1&quot;` &nbsp; &nbsp; if [ $COUNT -gt $3 ]; then &nbsp; &nbsp; &nbsp; &nbsp; uuencode &quot;$1&quot; &quot;$1&quot; | mailx -s &quot;Check Report $5&quot; &quot;$4&quot; &gt; /dev/null &nbsp; &nbsp; fi fi","headline":"Bash script to automate report checking","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2011/07/16/bash-script-to-automate-report-checking.html"},"url":"http://localhost:4000/2011/07/16/bash-script-to-automate-report-checking.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Deplication" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Deplication</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Bash script to automate report checking</h1>
    <p class="post-meta"><time class="dt-published" datetime="2011-07-16T11:20:00+01:00" itemprop="datePublished">
        Jul 16, 2011
      </time>â€¢ 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Craig Watcham</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    The script below is a convenient hack to automate manual report checking. It requires uuencode and mailx (or equivalents) to be installed and uses the regular expression provided on the command line to check if the occurrences are greater than the specified number. This allows for a number of convenient checks:<br />
<br />
<ul><li>Using "$" as the regex and a count of 1 prevents empty reports from being sent. The count can be changed to 2 if the report has a header line even when it has no results.</li>
<li>A specific condition can be matched, for example using a regex of "Match this text" to email the report only if the text appears in the report.</li>
</ul><br />
As always, there are multiple ways of solving the problem. This was a quick an convenient script to allow multiple reports to be checked and mailed to different recipients under different conditions.<br />
<br />
<blockquote>#!/bin/bash<br />
# Shell script for checking a named (text) report for a number of occurrences of a <br />
# search if the search string is found at least the number of times specified then <br />
# the report is mailed to the specified email list<br />
#<br />
# Usage example:<br />
# This command will check the report.csv report for any entries ($REPORT_DIR needs <br />
# to be set):<br />
# ./check_report.sh report.csv "$" 1 my.email@address "Email Subject"<br />
<br />
cd $REPORT_DIR<br />
<br />
if [ -e $1 ]; then<br />
&nbsp; &nbsp; COUNT=`grep -c "$2" "$1"`<br />
&nbsp; &nbsp; if [ $COUNT -gt $3 ]; then<br />
&nbsp; &nbsp; &nbsp; &nbsp; uuencode "$1" "$1" | mailx -s "Check Report $5" "$4" &gt; /dev/null<br />
&nbsp; &nbsp; fi<br />
fi</blockquote>
  </div><a class="u-url" href="/2011/07/16/bash-script-to-automate-report-checking.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="http://localhost:4000/feed.xml">
            <svg class="svg-icon orange">
              <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
                11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
                13.806c0-1.21.983-2.195 2.194-2.195zM10.606
                16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
              />
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">GitHub User</li>
          <li><a class="u-email" href="mailto:your-email@domain.com">your-email@domain.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Simpler is better.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
