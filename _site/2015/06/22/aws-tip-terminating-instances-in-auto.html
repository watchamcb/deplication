<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>AWS Tip: Terminating instances in an Auto Scaling group | Your awesome title</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="AWS Tip: Terminating instances in an Auto Scaling group" />
<meta name="author" content="Craig Watcham" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="EC2 instances launched by Auto Scaling really should not be terminated outside of Auto Scaling but if for some reason you (really, really) need to terminate a number of instances you may see some unexpected behaviour if you terminate them using the EC2 console. Instead of all the instances being replaced by Auto Scaling simultaneously they are replaced individually over a period of time. This means that it may take significantly longer than you would expect to get the ASG back to the original size. As an example an instance in my test ASG was replaced every 2 minutes, taking around 6 minutes to terminate and replace 3 instances. There are two ways of doing this more efficiently (using the supremely useful AWS CLI), firstly by setting the group capacity and then resetting it:" />
<meta property="og:description" content="EC2 instances launched by Auto Scaling really should not be terminated outside of Auto Scaling but if for some reason you (really, really) need to terminate a number of instances you may see some unexpected behaviour if you terminate them using the EC2 console. Instead of all the instances being replaced by Auto Scaling simultaneously they are replaced individually over a period of time. This means that it may take significantly longer than you would expect to get the ASG back to the original size. As an example an instance in my test ASG was replaced every 2 minutes, taking around 6 minutes to terminate and replace 3 instances. There are two ways of doing this more efficiently (using the supremely useful AWS CLI), firstly by setting the group capacity and then resetting it:" />
<link rel="canonical" href="http://localhost:4000/2015/06/22/aws-tip-terminating-instances-in-auto.html" />
<meta property="og:url" content="http://localhost:4000/2015/06/22/aws-tip-terminating-instances-in-auto.html" />
<meta property="og:site_name" content="Your awesome title" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-06-22T14:35:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="AWS Tip: Terminating instances in an Auto Scaling group" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Craig Watcham"},"dateModified":"2015-06-22T14:35:00+01:00","datePublished":"2015-06-22T14:35:00+01:00","description":"EC2 instances launched by Auto Scaling really should not be terminated outside of Auto Scaling but if for some reason you (really, really) need to terminate a number of instances you may see some unexpected behaviour if you terminate them using the EC2 console. Instead of all the instances being replaced by Auto Scaling simultaneously they are replaced individually over a period of time. This means that it may take significantly longer than you would expect to get the ASG back to the original size. As an example an instance in my test ASG was replaced every 2 minutes, taking around 6 minutes to terminate and replace 3 instances. There are two ways of doing this more efficiently (using the supremely useful AWS CLI), firstly by setting the group capacity and then resetting it:","headline":"AWS Tip: Terminating instances in an Auto Scaling group","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2015/06/22/aws-tip-terminating-instances-in-auto.html"},"url":"http://localhost:4000/2015/06/22/aws-tip-terminating-instances-in-auto.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Your awesome title" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Your awesome title</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">AWS Tip: Terminating instances in an Auto Scaling group</h1>
    <p class="post-meta"><time class="dt-published" datetime="2015-06-22T14:35:00+01:00" itemprop="datePublished">
        Jun 22, 2015
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Craig Watcham</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    EC2 instances launched by Auto Scaling really should not be terminated outside of Auto Scaling but if for some reason you (really, really) need to terminate a number of instances you may see some unexpected behaviour if you terminate them using the EC2 console. Instead of all the instances being replaced by Auto Scaling simultaneously they are replaced individually over a period of time. This means that it may take significantly longer than you would expect to get the ASG back to the original size. As an <a href="https://gist.github.com/watchamcb/fc686c70e8c2660ee7ef" target="_blank">example</a>&nbsp;an instance in my test ASG was replaced every 2 minutes, taking around 6 minutes to terminate and replace 3 instances.<br />
<br />
There are two ways of doing this more efficiently (using the supremely useful <a href="http://docs.aws.amazon.com/cli/latest/index.html" target="_blank">AWS CLI</a>), firstly by setting the group capacity and then resetting it:<br />
<br />
<br />
<script src="https://gist.github.com/watchamcb/f798d361a8b74fb0a707.js"></script>

Note that&nbsp;<a href="http://docs.aws.amazon.com/cli/latest/reference/autoscaling/update-auto-scaling-group.html" target="_blank">update-auto-scaling-group</a>&nbsp;is used due to the minimum size being set, if no minimum size is specified the same result can be achieved with&nbsp;<a href="http://docs.aws.amazon.com/cli/latest/reference/autoscaling/set-desired-capacity.html" target="_blank">set-desired-capacity</a>.<br />
<br />
The second option is to use&nbsp;<a href="http://docs.aws.amazon.com/cli/latest/reference/autoscaling/terminate-instance-in-auto-scaling-group.html" target="_blank">terminate-instance-in-auto-scaling-group</a>:<br />
<br />
<br />
<script src="https://gist.github.com/watchamcb/cf6e8e4a03f204fe9fe4.js"></script>

  </div><a class="u-url" href="/2015/06/22/aws-tip-terminating-instances-in-auto.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="http://localhost:4000/feed.xml">
            <svg class="svg-icon orange">
              <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
                11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
                13.806c0-1.21.983-2.195 2.194-2.195zM10.606
                16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
              />
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">GitHub User</li>
          <li><a class="u-email" href="mailto:your-email@domain.com">your-email@domain.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
