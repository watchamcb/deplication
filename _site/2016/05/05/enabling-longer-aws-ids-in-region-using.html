<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Enabling longer AWS IDs in a region using an IAM role | Your awesome title</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Enabling longer AWS IDs in a region using an IAM role" />
<meta name="author" content="Craig Watcham" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="AWS is moving towards longer EC2 and EBS IDs and you can enable them for an IAM user or at an account level using the root credentials. You can avoid using the root credentials by using an IAM role instead. This is a quick post to explain the steps needed to use an IAM role on an instance to enable the longer IDs at an account level. Update: You can now use the –principal-arn argument to to make this change to the root account, see the AWS support post here. Update 2: Another alternative, using this script. 1. Create a policy allowing modify and describe of ID format (IAM console -&gt; Policies -&gt; Create Policy -&gt; Create Your Own Policy). The following policy document (originally from here with the Deny changed to Allow) provides the necessary permissions, {   “Version”: “2012-10-17”,   “Statement”: [     {       “Effect”: “Allow”,       “Action”: [         “ec2:ModifyIdFormat”, “ec2:DescribeIdFormat”       ],       “Resource”: “*“     }   ] } 2. Create an EC2 role (IAM console -&gt; Roles -&gt; Create New Role -&gt; [Pick a name] -&gt; Amazon EC2). Select the policy name you created in step 1 and attach it to the role. 3. Launch an instance with the role. It is probably easiest to use an Amazon Linux AMI as the AWS CLI is installed by default. Instance size and region don’t really matter. 4. SSH to the instance and use the CLI to enable the longer IDs in the region that you would like to test against: $ aws –region eu-west-1 ec2 modify-id-format –resource instance –use-long-ids If you don’t specify a region the CLI will prompt you to run ‘aws configure’ to set a default. To check the status of the ID format you can use describe-id-format: $ aws –region eu-west-1 ec2 describe-id-format {     “Statuses”: [         {             “UseLongIds”: false,             “Resource”: “reservation”         },         {             “UseLongIds”: true,             “Resource”: “instance”         },         {             “UseLongIds”: false,             “Resource”: “volume”         },         {             “UseLongIds”: false,             “Resource”: “snapshot”         }     ] } 5. Longer IDs are now enabled for the account. Resources created by the root account (such as Auto Scaled instances) will be launched with longer IDs." />
<meta property="og:description" content="AWS is moving towards longer EC2 and EBS IDs and you can enable them for an IAM user or at an account level using the root credentials. You can avoid using the root credentials by using an IAM role instead. This is a quick post to explain the steps needed to use an IAM role on an instance to enable the longer IDs at an account level. Update: You can now use the –principal-arn argument to to make this change to the root account, see the AWS support post here. Update 2: Another alternative, using this script. 1. Create a policy allowing modify and describe of ID format (IAM console -&gt; Policies -&gt; Create Policy -&gt; Create Your Own Policy). The following policy document (originally from here with the Deny changed to Allow) provides the necessary permissions, {   “Version”: “2012-10-17”,   “Statement”: [     {       “Effect”: “Allow”,       “Action”: [         “ec2:ModifyIdFormat”, “ec2:DescribeIdFormat”       ],       “Resource”: “*“     }   ] } 2. Create an EC2 role (IAM console -&gt; Roles -&gt; Create New Role -&gt; [Pick a name] -&gt; Amazon EC2). Select the policy name you created in step 1 and attach it to the role. 3. Launch an instance with the role. It is probably easiest to use an Amazon Linux AMI as the AWS CLI is installed by default. Instance size and region don’t really matter. 4. SSH to the instance and use the CLI to enable the longer IDs in the region that you would like to test against: $ aws –region eu-west-1 ec2 modify-id-format –resource instance –use-long-ids If you don’t specify a region the CLI will prompt you to run ‘aws configure’ to set a default. To check the status of the ID format you can use describe-id-format: $ aws –region eu-west-1 ec2 describe-id-format {     “Statuses”: [         {             “UseLongIds”: false,             “Resource”: “reservation”         },         {             “UseLongIds”: true,             “Resource”: “instance”         },         {             “UseLongIds”: false,             “Resource”: “volume”         },         {             “UseLongIds”: false,             “Resource”: “snapshot”         }     ] } 5. Longer IDs are now enabled for the account. Resources created by the root account (such as Auto Scaled instances) will be launched with longer IDs." />
<link rel="canonical" href="http://localhost:4000/2016/05/05/enabling-longer-aws-ids-in-region-using.html" />
<meta property="og:url" content="http://localhost:4000/2016/05/05/enabling-longer-aws-ids-in-region-using.html" />
<meta property="og:site_name" content="Your awesome title" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-05-05T12:11:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Enabling longer AWS IDs in a region using an IAM role" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Craig Watcham"},"dateModified":"2016-05-05T12:11:00+01:00","datePublished":"2016-05-05T12:11:00+01:00","description":"AWS is moving towards longer EC2 and EBS IDs and you can enable them for an IAM user or at an account level using the root credentials. You can avoid using the root credentials by using an IAM role instead. This is a quick post to explain the steps needed to use an IAM role on an instance to enable the longer IDs at an account level. Update: You can now use the –principal-arn argument to to make this change to the root account, see the AWS support post here. Update 2: Another alternative, using this script. 1. Create a policy allowing modify and describe of ID format (IAM console -&gt; Policies -&gt; Create Policy -&gt; Create Your Own Policy). The following policy document (originally from here with the Deny changed to Allow) provides the necessary permissions, {   “Version”: “2012-10-17”,   “Statement”: [     {       “Effect”: “Allow”,       “Action”: [         “ec2:ModifyIdFormat”, “ec2:DescribeIdFormat”       ],       “Resource”: “*“     }   ] } 2. Create an EC2 role (IAM console -&gt; Roles -&gt; Create New Role -&gt; [Pick a name] -&gt; Amazon EC2). Select the policy name you created in step 1 and attach it to the role. 3. Launch an instance with the role. It is probably easiest to use an Amazon Linux AMI as the AWS CLI is installed by default. Instance size and region don’t really matter. 4. SSH to the instance and use the CLI to enable the longer IDs in the region that you would like to test against: $ aws –region eu-west-1 ec2 modify-id-format –resource instance –use-long-ids If you don’t specify a region the CLI will prompt you to run ‘aws configure’ to set a default. To check the status of the ID format you can use describe-id-format: $ aws –region eu-west-1 ec2 describe-id-format {     “Statuses”: [         {             “UseLongIds”: false,             “Resource”: “reservation”         },         {             “UseLongIds”: true,             “Resource”: “instance”         },         {             “UseLongIds”: false,             “Resource”: “volume”         },         {             “UseLongIds”: false,             “Resource”: “snapshot”         }     ] } 5. Longer IDs are now enabled for the account. Resources created by the root account (such as Auto Scaled instances) will be launched with longer IDs.","headline":"Enabling longer AWS IDs in a region using an IAM role","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2016/05/05/enabling-longer-aws-ids-in-region-using.html"},"url":"http://localhost:4000/2016/05/05/enabling-longer-aws-ids-in-region-using.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Your awesome title" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Your awesome title</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Enabling longer AWS IDs in a region using an IAM role</h1>
    <p class="post-meta"><time class="dt-published" datetime="2016-05-05T12:11:00+01:00" itemprop="datePublished">
        May 5, 2016
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Craig Watcham</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    AWS is moving towards longer EC2 and EBS IDs and you can enable them for an IAM user or at an account level using the root credentials. You can avoid using the root credentials by using an IAM role instead. This is a quick post to explain the steps needed to use an IAM role on an instance to enable the longer IDs at an account level.<br />
<br />
<b>Update: </b>You can now use the --principal-arn argument to to make this change to the root account, see the AWS support post <a href="https://aws.amazon.com/premiumsupport/knowledge-center/enable-long-id/">here</a>.<br />
<br />
<b>Update 2:</b>&nbsp;Another alternative, using this <a href="https://github.com/awslabs/ec2-migrate-longer-id/blob/master/migratelongerids.py">script</a>.<br />
<br />
<b>1. Create a policy allowing modify and describe of ID format</b> (IAM console -&gt; Policies -&gt; Create Policy -&gt; Create Your Own Policy). The following policy document (originally from here with the Deny changed to Allow) provides the necessary permissions,<br />
<br />
{<br />
&nbsp; "Version": "2012-10-17",<br />
&nbsp; "Statement": [<br />
&nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; "Effect": "Allow",<br />
&nbsp; &nbsp; &nbsp; "Action": [<br />
&nbsp; &nbsp; &nbsp; &nbsp; "ec2:ModifyIdFormat", "ec2:DescribeIdFormat"<br />
&nbsp; &nbsp; &nbsp; ],<br />
&nbsp; &nbsp; &nbsp; "Resource": "*"<br />
&nbsp; &nbsp; }<br />
&nbsp; ]<br />
}<br />
<br />
<b>2. Create an EC2 role</b> (IAM console -&gt; Roles -&gt; Create New Role -&gt; [Pick a name] -&gt; Amazon EC2). Select the policy name you created in step 1 and attach it to the role.<br />
<br />
<b>3. Launch an instance with the role</b>. It is probably easiest to use an Amazon Linux AMI as the AWS CLI is installed by default. Instance size and region don't really matter.<br />
<br />
<b>4. SSH to the instance and use the CLI to enable the longer IDs</b> in the region that you would like to test against:<br />
$ aws --region eu-west-1 ec2 modify-id-format --resource instance --use-long-ids<br />
<br />
If you don't specify a region the CLI will prompt you to run 'aws configure' to set a default. To check the status of the ID format you can use describe-id-format:<br />
$ aws --region eu-west-1 ec2 describe-id-format<br />
<br />
{<br />
&nbsp; &nbsp; "Statuses": [<br />
&nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "UseLongIds": false,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "Resource": "reservation"<br />
&nbsp; &nbsp; &nbsp; &nbsp; },<br />
&nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "UseLongIds": true,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "Resource": "instance"<br />
&nbsp; &nbsp; &nbsp; &nbsp; },<br />
&nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "UseLongIds": false,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "Resource": "volume"<br />
&nbsp; &nbsp; &nbsp; &nbsp; },<br />
&nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "UseLongIds": false,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "Resource": "snapshot"<br />
&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp; &nbsp; ]<br />
}<br />
<br />
<b>5. Longer IDs are now enabled for the account. </b>Resources created by the root account (such as Auto Scaled instances) will be launched with longer IDs.
  </div><a class="u-url" href="/2016/05/05/enabling-longer-aws-ids-in-region-using.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="http://localhost:4000/feed.xml">
            <svg class="svg-icon orange">
              <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194
                11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0
                13.806c0-1.21.983-2.195 2.194-2.195zM10.606
                16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"
              />
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">GitHub User</li>
          <li><a class="u-email" href="mailto:your-email@domain.com">your-email@domain.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
