<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Ignored EJB3 @Column name attribute | Deplication</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Ignored EJB3 @Column name attribute" />
<meta name="author" content="Craig Watcham" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I am working on an EJB3 project after a few months on other work and I ran into a small issue with the EJB3 @Column name attribute. The attribute is meant to allow the mapping of a column to a different name in an entity. If your database table has an unusable (or just unfriendly) column name you can map it to a more logical field name in the entity. In my case the table is a mapping table that I am creating an object model against and I wanted to map the “sub_account_name” column to “name”. My initial implementation was as follows: @Entity @Table(name = “portfolio_subaccount”) public class Portfolio implements Serializable {     private static final long serialVersionUID = 3450488234689579105L;     @Id     @GeneratedValue     private long id;     private String name;     public long getId() {         return id;     }     public void setId(long id) {         this.id = id;     }     @Column(name = “sub_account_name”, nullable = true)     public String getName() {         return name;     }     public void setName(String name) {         this.name = name;     } } The deployment does not report any errors however the test client code below causes a GenericJDBCException to be thrown. public class Client {     public static void main(String[] args) {         try {             Context context = getInitialContext();             BeanRemote remote = (BeanRemote) context.lookup(“SomeBean/remote”);             Portfolio portfolio = remote.getPortfolio(352);             System.out.println(portfolio.getId() + ”: “ + portfolio.getName());         } catch (Exception e) {             e.printStackTrace();         }     }     private static Context getInitialContext() throws NamingException {         Properties props = new Properties();         props.put(Context.PROVIDER_URL, “jnp://server:1099”);         props.put(Context.URL_PKG_PREFIXES, “org.jboss.naming:org.jnp.interfaces”);         props.put(Context.INITIAL_CONTEXT_FACTORY, “org.jnp.interfaces.NamingContextFactory”);         return new InitialContext(props);     } } The exception (from the server logs) indicates that the name column is not found on the table: 2012-07-12 11:37:28,049 ERROR [org.hibernate.util.JDBCExceptionReporter] (WorkerThread#2[172.19.216.159:34038]) Invalid column name ‘name’. Which is quite interesting given the annotation indicating the column is actually called &quot;sub_account_name&quot;. The problem is caused by the location of the annotation, it seems that Hibernate does not handle some annotations being on the variable declaration while others are on the accessor methods. Moving the @Column annotation to the variable declaration corrects the problem. The corrected class is below. @Entity @Table(name = &quot;portfolio_subaccount&quot;) public class&nbsp;Portfolio&nbsp;implements&nbsp;Serializable { &nbsp; &nbsp;&nbsp;private static final long&nbsp;serialVersionUID&nbsp;= 3450488234689579105L; &nbsp; &nbsp;&nbsp;@Id &nbsp; &nbsp; @GeneratedValue &nbsp; &nbsp;&nbsp;private long&nbsp;id; &nbsp; &nbsp;&nbsp;@Column(name = &quot;sub_account_name&quot;, nullable =&nbsp;true) &nbsp; &nbsp;&nbsp;private&nbsp;String&nbsp;name; &nbsp; &nbsp;&nbsp;public long&nbsp;getId() { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return&nbsp;id; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public void&nbsp;setId(long&nbsp;id) { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;this.id&nbsp;=&nbsp;id; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public&nbsp;String getName() { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return&nbsp;name; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public void&nbsp;setName(String name) { &nbsp; &nbsp; &nbsp; &nbsp; this.name&nbsp;=&nbsp;name; &nbsp; &nbsp; } }" />
<meta property="og:description" content="I am working on an EJB3 project after a few months on other work and I ran into a small issue with the EJB3 @Column name attribute. The attribute is meant to allow the mapping of a column to a different name in an entity. If your database table has an unusable (or just unfriendly) column name you can map it to a more logical field name in the entity. In my case the table is a mapping table that I am creating an object model against and I wanted to map the “sub_account_name” column to “name”. My initial implementation was as follows: @Entity @Table(name = “portfolio_subaccount”) public class Portfolio implements Serializable {     private static final long serialVersionUID = 3450488234689579105L;     @Id     @GeneratedValue     private long id;     private String name;     public long getId() {         return id;     }     public void setId(long id) {         this.id = id;     }     @Column(name = “sub_account_name”, nullable = true)     public String getName() {         return name;     }     public void setName(String name) {         this.name = name;     } } The deployment does not report any errors however the test client code below causes a GenericJDBCException to be thrown. public class Client {     public static void main(String[] args) {         try {             Context context = getInitialContext();             BeanRemote remote = (BeanRemote) context.lookup(“SomeBean/remote”);             Portfolio portfolio = remote.getPortfolio(352);             System.out.println(portfolio.getId() + ”: “ + portfolio.getName());         } catch (Exception e) {             e.printStackTrace();         }     }     private static Context getInitialContext() throws NamingException {         Properties props = new Properties();         props.put(Context.PROVIDER_URL, “jnp://server:1099”);         props.put(Context.URL_PKG_PREFIXES, “org.jboss.naming:org.jnp.interfaces”);         props.put(Context.INITIAL_CONTEXT_FACTORY, “org.jnp.interfaces.NamingContextFactory”);         return new InitialContext(props);     } } The exception (from the server logs) indicates that the name column is not found on the table: 2012-07-12 11:37:28,049 ERROR [org.hibernate.util.JDBCExceptionReporter] (WorkerThread#2[172.19.216.159:34038]) Invalid column name ‘name’. Which is quite interesting given the annotation indicating the column is actually called &quot;sub_account_name&quot;. The problem is caused by the location of the annotation, it seems that Hibernate does not handle some annotations being on the variable declaration while others are on the accessor methods. Moving the @Column annotation to the variable declaration corrects the problem. The corrected class is below. @Entity @Table(name = &quot;portfolio_subaccount&quot;) public class&nbsp;Portfolio&nbsp;implements&nbsp;Serializable { &nbsp; &nbsp;&nbsp;private static final long&nbsp;serialVersionUID&nbsp;= 3450488234689579105L; &nbsp; &nbsp;&nbsp;@Id &nbsp; &nbsp; @GeneratedValue &nbsp; &nbsp;&nbsp;private long&nbsp;id; &nbsp; &nbsp;&nbsp;@Column(name = &quot;sub_account_name&quot;, nullable =&nbsp;true) &nbsp; &nbsp;&nbsp;private&nbsp;String&nbsp;name; &nbsp; &nbsp;&nbsp;public long&nbsp;getId() { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return&nbsp;id; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public void&nbsp;setId(long&nbsp;id) { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;this.id&nbsp;=&nbsp;id; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public&nbsp;String getName() { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return&nbsp;name; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public void&nbsp;setName(String name) { &nbsp; &nbsp; &nbsp; &nbsp; this.name&nbsp;=&nbsp;name; &nbsp; &nbsp; } }" />
<link rel="canonical" href="http://localhost:4000/2012/07/12/ignored-ejb3-column-name-attribute.html" />
<meta property="og:url" content="http://localhost:4000/2012/07/12/ignored-ejb3-column-name-attribute.html" />
<meta property="og:site_name" content="Deplication" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-07-12T12:10:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Ignored EJB3 @Column name attribute" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Craig Watcham"},"dateModified":"2012-07-12T12:10:00+01:00","datePublished":"2012-07-12T12:10:00+01:00","description":"I am working on an EJB3 project after a few months on other work and I ran into a small issue with the EJB3 @Column name attribute. The attribute is meant to allow the mapping of a column to a different name in an entity. If your database table has an unusable (or just unfriendly) column name you can map it to a more logical field name in the entity. In my case the table is a mapping table that I am creating an object model against and I wanted to map the “sub_account_name” column to “name”. My initial implementation was as follows: @Entity @Table(name = “portfolio_subaccount”) public class Portfolio implements Serializable {     private static final long serialVersionUID = 3450488234689579105L;     @Id     @GeneratedValue     private long id;     private String name;     public long getId() {         return id;     }     public void setId(long id) {         this.id = id;     }     @Column(name = “sub_account_name”, nullable = true)     public String getName() {         return name;     }     public void setName(String name) {         this.name = name;     } } The deployment does not report any errors however the test client code below causes a GenericJDBCException to be thrown. public class Client {     public static void main(String[] args) {         try {             Context context = getInitialContext();             BeanRemote remote = (BeanRemote) context.lookup(“SomeBean/remote”);             Portfolio portfolio = remote.getPortfolio(352);             System.out.println(portfolio.getId() + ”: “ + portfolio.getName());         } catch (Exception e) {             e.printStackTrace();         }     }     private static Context getInitialContext() throws NamingException {         Properties props = new Properties();         props.put(Context.PROVIDER_URL, “jnp://server:1099”);         props.put(Context.URL_PKG_PREFIXES, “org.jboss.naming:org.jnp.interfaces”);         props.put(Context.INITIAL_CONTEXT_FACTORY, “org.jnp.interfaces.NamingContextFactory”);         return new InitialContext(props);     } } The exception (from the server logs) indicates that the name column is not found on the table: 2012-07-12 11:37:28,049 ERROR [org.hibernate.util.JDBCExceptionReporter] (WorkerThread#2[172.19.216.159:34038]) Invalid column name ‘name’. Which is quite interesting given the annotation indicating the column is actually called &quot;sub_account_name&quot;. The problem is caused by the location of the annotation, it seems that Hibernate does not handle some annotations being on the variable declaration while others are on the accessor methods. Moving the @Column annotation to the variable declaration corrects the problem. The corrected class is below. @Entity @Table(name = &quot;portfolio_subaccount&quot;) public class&nbsp;Portfolio&nbsp;implements&nbsp;Serializable { &nbsp; &nbsp;&nbsp;private static final long&nbsp;serialVersionUID&nbsp;= 3450488234689579105L; &nbsp; &nbsp;&nbsp;@Id &nbsp; &nbsp; @GeneratedValue &nbsp; &nbsp;&nbsp;private long&nbsp;id; &nbsp; &nbsp;&nbsp;@Column(name = &quot;sub_account_name&quot;, nullable =&nbsp;true) &nbsp; &nbsp;&nbsp;private&nbsp;String&nbsp;name; &nbsp; &nbsp;&nbsp;public long&nbsp;getId() { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return&nbsp;id; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public void&nbsp;setId(long&nbsp;id) { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;this.id&nbsp;=&nbsp;id; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public&nbsp;String getName() { &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return&nbsp;name; &nbsp; &nbsp; } &nbsp; &nbsp;&nbsp;public void&nbsp;setName(String name) { &nbsp; &nbsp; &nbsp; &nbsp; this.name&nbsp;=&nbsp;name; &nbsp; &nbsp; } }","headline":"Ignored EJB3 @Column name attribute","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2012/07/12/ignored-ejb3-column-name-attribute.html"},"url":"http://localhost:4000/2012/07/12/ignored-ejb3-column-name-attribute.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Deplication" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Deplication</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Ignored EJB3 @Column name attribute</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2012-07-12T12:10:00+01:00" itemprop="datePublished">Jul 12, 2012
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Craig Watcham</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    I am working on an EJB3 project after a few months on other work and I ran into a small issue with the EJB3 @Column name attribute. The attribute is meant to allow the mapping of a column to a different name in an entity. If your database table has an unusable (or just unfriendly) column name you can map it to a more logical field name in the entity.<br />
<br />
In my case the table is a mapping table that I am creating an object model against and I wanted to map the "sub_account_name" column to "name". My initial implementation was as follows:<br />
<br />
<br />
<span style="color: #999999;">@Entity</span><br />
<span style="color: #999999;">@Table</span>(name = "<span style="color: blue;">portfolio_subaccount</span>")<br />
<span style="color: #990000;">public class</span> Portfolio <span style="color: #990000;">implements</span> Serializable {<br />
&nbsp; &nbsp; <span style="color: #990000;">private static final long</span> <span style="color: blue;">serialVersionUID </span>= 3450488234689579105L;<br />
<br />
&nbsp; &nbsp; <span style="color: #999999;">@Id</span><br />
<span style="color: #999999;">&nbsp; &nbsp; @GeneratedValue</span><br />
&nbsp; &nbsp; <span style="color: #990000;">private long </span><span style="color: blue;">id</span>;<br />
<span style="background-color: white;">&nbsp; &nbsp; <span style="color: #990000;">private </span>String <span style="color: blue;">name</span>;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #990000;">public long</span> getId() {<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #990000;">return </span><span style="color: blue;">id</span>;<br />
&nbsp; &nbsp; }<br />
<br />
&nbsp; &nbsp; <span style="color: #990000;">public void</span> setId(<span style="color: #990000;">long </span>id) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #990000;">this</span>.<span style="color: blue;">id </span>= <span style="color: blue;">id</span>;<br />
&nbsp; &nbsp; }<br />
<br />
&nbsp; &nbsp; <span style="color: #999999;">@Column</span>(name = "<span style="color: blue;">sub_account_name</span>", nullable = <span style="color: #990000;">true</span>)<br />
&nbsp; &nbsp; <span style="color: #990000;">public </span>String getName() {<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #990000;">return </span><span style="color: blue;">name</span>;<br />
&nbsp; &nbsp; }<br />
<br />
&nbsp; &nbsp; <span style="color: #990000;">public void</span> setName(String name) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; this.<span style="color: blue;">name </span>= <span style="color: blue;">name</span>;<br />
&nbsp; &nbsp; }<br />
}<br />
<br />
<br />
The deployment does not report any errors however the test client code below causes a GenericJDBCException to be thrown.<br />
<br />
<br />
<span style="color: #990000;">public class </span>Client {<br />
<br />
&nbsp; &nbsp; <span style="color: #990000;">public static void </span>main(String[] args) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; try {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Context context = getInitialContext();<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BeanRemote remote = (BeanRemote) context.lookup("<span style="color: blue;">SomeBean/remot</span>e");<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Portfolio portfolio = remote.getPortfolio(352);<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.<span style="color: blue;">out</span>.println(portfolio.getId() + <span style="color: blue;">": "</span> + portfolio.getName());<br />
&nbsp; &nbsp; &nbsp; &nbsp; } <span style="color: #990000;">catch </span>(Exception e) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.printStackTrace();<br />
&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp; &nbsp; }<br />
<br />
&nbsp; &nbsp; <span style="color: #990000;">private static</span> Context getInitialContext() <span style="color: #990000;">throws </span>NamingException {<br />
&nbsp; &nbsp; &nbsp; &nbsp; Properties props = new Properties();<br />
&nbsp; &nbsp; &nbsp; &nbsp; props.put(Context.<span style="color: blue;">PROVIDER_URL</span>, "<span style="color: blue;">jnp://server:1099</span>");<br />
&nbsp;&nbsp;<span style="background-color: white;">&nbsp; &nbsp; &nbsp; props.put(Context.<span style="color: blue;">URL_PKG_PREFIXES</span>, "<span style="color: blue;">org.jboss.naming:org.jnp.interfaces</span>");</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; props.put(Context.<span style="color: blue;">INITIAL_CONTEXT_FACTORY</span>, "<span style="color: blue;">org.jnp.interfaces.NamingContextFactory</span>");<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #990000;">return new</span> InitialContext(props);<br />
&nbsp; &nbsp; }<br />
<span style="background-color: white;">}</span><br />
<br />
The exception (from the server logs) indicates that the name column is not found on the table:<br />
<br />
2012-07-12 11:37:28,049 ERROR [org.hibernate.util.JDBCExceptionReporter] (WorkerThread#2[172.19.216.159:34038]) Invalid column name 'name'.<br />
<div>
<br /></div>
<div>
Which is quite interesting given the annotation indicating the column is actually called "sub_account_name". The problem is caused by the location of the annotation, it seems that Hibernate does not handle some annotations being on the variable declaration while others are on the accessor methods. Moving the @Column annotation to the variable declaration corrects the problem. The corrected class is below.</div>
<div>
<br /></div>
<div>
<span style="color: #999999;">@Entity</span><br />
<span style="color: #999999;">@Table</span>(name = "<span style="color: blue;">portfolio_subaccount</span>")<br />
<span style="color: #990000;">public class</span>&nbsp;Portfolio&nbsp;<span style="color: #990000;">implements</span>&nbsp;Serializable {<br />
&nbsp; &nbsp;&nbsp;<span style="color: #990000;">private static final long</span>&nbsp;<span style="color: blue;">serialVersionUID&nbsp;</span>= 3450488234689579105L;<br />
<br />
&nbsp; &nbsp;&nbsp;<span style="color: #999999;">@Id</span><br />
<span style="color: #999999;">&nbsp; &nbsp; @GeneratedValue</span><br />
&nbsp; &nbsp;&nbsp;<span style="color: #990000;">private long&nbsp;</span><span style="color: blue;">id</span>;<br />
<br />
&nbsp; &nbsp;&nbsp;<span style="color: #999999;">@Column</span>(name = "<span style="color: blue;">sub_account_name</span>", nullable =&nbsp;<span style="color: #990000;">true</span>)<br />
<span style="background-color: white;">&nbsp; &nbsp;&nbsp;<span style="color: #990000;">private&nbsp;</span>String&nbsp;<span style="color: blue;">name</span>;</span><br />
<br />
&nbsp; &nbsp;&nbsp;<span style="color: #990000;">public long</span>&nbsp;getId() {<br />
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style="color: #990000;">return&nbsp;</span><span style="color: blue;">id</span>;<br />
&nbsp; &nbsp; }<br />
<br />
&nbsp; &nbsp;&nbsp;<span style="color: #990000;">public void</span>&nbsp;setId(<span style="color: #990000;">long&nbsp;</span>id) {<br />
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style="color: #990000;">this</span>.<span style="color: blue;">id&nbsp;</span>=&nbsp;<span style="color: blue;">id</span>;<br />
&nbsp; &nbsp; }<br />
<br />
<span style="background-color: white;">&nbsp; &nbsp;</span><span style="background-color: white;">&nbsp;</span><span style="background-color: white; color: #990000;">public&nbsp;</span><span style="background-color: white;">String getName() {</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style="color: #990000;">return&nbsp;</span><span style="color: blue;">name</span>;<br />
&nbsp; &nbsp; }<br />
<br />
&nbsp; &nbsp;&nbsp;<span style="color: #990000;">public void</span>&nbsp;setName(String name) {<br />
&nbsp; &nbsp; &nbsp; &nbsp; this.<span style="color: blue;">name&nbsp;</span>=&nbsp;<span style="color: blue;">name</span>;<br />
&nbsp; &nbsp; }<br />
}<br />
</div>
<br />
<br />
  </div><a class="u-url" href="/2012/07/12/ignored-ejb3-column-name-attribute.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Deplication</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Deplication</li><li><a class="u-email" href="mailto:craig@deplication.net">craig@deplication.net</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/watchamcb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">watchamcb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Simpler is better.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
